<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Projects</title>
  <link rel="icon" type="image/x-icon" href="/images/favicon.png">
  <link rel="stylesheet" href="../../../index.css">
  <link rel="stylesheet" href="../../project-styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Epilogue:wght@400;500;700&display=swap" rel="stylesheet">
  <script src="../../project-content.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-go.min.js"></script>
</head>
<body>
<div class="navbar">
  <a href="../../..">Home</a>
  <a href="../.." class="active">Projects</a>
  <a href="../../../about">About</a>
  <a href="../../../contact">Contact</a>
</div>

<div class="content">
  <div class="wrapper">
    <div class="left-sidebar">
      <h1>Contents</h1>
    </div>

    <div class="project-content">
      <h1 class="section-heading">Package Overview</h1>
      <h2 class="section-subheading">Package Name</h2>
      <p>Pgtyconv</p>

      <h2 class="section-subheading">Purpose</h2>
      <p>
        A utility package to easily convert
        <a href="https://github.com/jackc/pgtype" target="_blank">https://github.com/jackc/pgtype</a>
        types to standard typings.
      </p>

      <h2 class="section-subheading">Development Duration</h2>
      <p>June 2024 - July 2024</p>

      <h1 class="section-heading">Design & Implementation</h1>
      <h2 class="section-subheading">Overview</h2>
      <p>
        The pgtypeconv package provides a set of utility functions for converting between PostgreSQL types and Go types,
        simplifying the process of handling data interchange between your Go application and a PostgreSQL database. This
        package supports conversion for various data types, including integers, floating-point numbers, strings, UUIDs,
        and timestamps.
      </p>

      <h2 class="section-subheading">Core Features</h2>
      <ul>
        <li>
          <strong>Type Conversion Functions</strong>:
          Convert between Go types and PostgreSQL types (pgtype), including float32, float64, int64, string,
          uuid, Date, and Timestamptz.
        </li>
        <li>
          <strong>Support for Pointers</strong>:
          Handle conversions from and to pointer types, accommodating nullable fields.
        </li>
        <li>
          <strong>Versatile Data Handling</strong>:
          Convert various data formats, such as int64 to pgtype.Int8, string to pgtype.Text, and uuid.UUID to
          pgtype.UUID.
        </li>
        <li>
          <strong>Time Conversion</strong>:
          Facilitate conversion between Unix timestamps and PostgreSQL date/time types (pgtype.Date,
          pgtype.Timestamptz), supporting different time units.
        </li>
        <li>
          <strong>Bidirectional Conversion</strong>:
          Support both conversion to and from PostgreSQL types, ensuring seamless data manipulation between Go and
          PostgreSQL.
        </li>
      </ul>

      <h2 class="section-subheading">Key Components</h2>
      <pre>
        <code class="language-go">
package pgtyconv

// FromFloat32 converts a float32 to pgtype.Float4.
func FromFloat32(f float32) pgtype.Float4 {
}

// FromFloat32Ptr converts a *float32 to pgtype.Float4.
func FromFloat32Ptr(f *float32) pgtype.Float4 {
}

// FromFloat64 converts a float64 to pgtype.Float8.
func FromFloat64(f float64) pgtype.Float8 {
}

// FromFloat64Ptr converts a *float64 to pgtype.Float8.
func FromFloat64Ptr(f *float64) pgtype.Float8 {
}

// FromInt64 converts an int64 to pgtype.Int8.
func FromInt64(i int64) pgtype.Int8 {
}

// FromInt64Ptr converts a *int64 to pgtype.Int8.
func FromInt64Ptr(i *int64) pgtype.Int8 {
}

// FromString converts a string to pgtype.Text.
func FromString(s string) pgtype.Text {
}

// FromStringPtr converts a *string to pgtype.Text.
func FromStringPtr(s *string) pgtype.Text {
}

// FromUUID converts a uuid.UUID to pgtype.UUID.
func FromUUID(u uuid.UUID) pgtype.UUID {
}

// FromUUIDPtr converts a *uuid.UUID to pgtype.UUID.
func FromUUIDPtr(u *uuid.UUID) pgtype.UUID {
}

// FromUnixDate converts an int64 to pgtype.Date.
func FromUnixDate(i int64, u TimeUnit) pgtype.Date {
}

// FromUnixDatePtr converts a *int64 to pgtype.Date.
func FromUnixDatePtr(i *int64, u TimeUnit) pgtype.Date {
}

// FromUnixTime converts an int64 to pgtype.Timestamptz.
func FromUnixTime(i int64, u TimeUnit) pgtype.Timestamptz {
}

// FromUnixTimePtr converts a *int64 to pgtype.Timestamptz.
func FromUnixTimePtr(i *int64, u TimeUnit) pgtype.Timestamptz {
}

// ToFloat32 converts pgtype.Float4 to float32.
func ToFloat32(t pgtype.Float4) float32 {
}

// ToFloat32Ptr converts pgtype.Float4 to *float32.
func ToFloat32Ptr(t pgtype.Float4) *float32 {
}

// ToFloat64 converts pgtype.Float8 to float64.
func ToFloat64(t pgtype.Float8) float64 {
}

// ToFloat64Ptr converts pgtype.Float8 to *float64.
func ToFloat64Ptr(t pgtype.Float8) *float64 {
}

// ToInt64 converts pgtype.Int8 to int64.
func ToInt64(t pgtype.Int8) int64 {
}

// ToInt64Ptr converts pgtype.Int8 to *int64.
func ToInt64Ptr(t pgtype.Int8) *int64 {
}

// ToString converts pgtype.Text to string.
func ToString(t pgtype.Text) string {
}

// ToStringPtr converts pgtype.Text to *string.
func ToStringPtr(t pgtype.Text) *string {
}

// ToUUID converts pgtype.UUID to uuid.UUID.
func ToUUID(u pgtype.UUID) uuid.UUID {
}

// ToUUIDPtr converts pgtype.UUID to *uuid.UUID.
func ToUUIDPtr(u pgtype.UUID) *uuid.UUID {
}

// ToUnixDate converts pgtype.Date to int64.
func ToUnixDate(d pgtype.Date, u TimeUnit) int64 {
}

// ToUnixDatePtr converts pgtype.Date to *int64.
func ToUnixDatePtr(d pgtype.Date, u TimeUnit) *int64 {
}

// ToUnixTime converts pgtype.Timestamptz to int64.
func ToUnixTime(d pgtype.Timestamptz, u TimeUnit) int64 {
}

// ToUnixTimePtr converts pgtype.Timestamptz to *int64.
func ToUnixTimePtr(d pgtype.Timestamptz, u TimeUnit) *int64 {
}
</code>
</pre>

      <h2 class="section-subheading">Usage Examples</h2>
      <pre>
        <code class="language-go">
package main

import (
    "fmt"
    "github.com/jackc/pgx/pgtype"
    "github.com/papaya147/pgtyconv"
    "github.com/google/uuid"
    "time"
)

type User struct {
    UserId     int64
    FirstName  *string
    MiddleName *string
    LastName   *string
    Birthday   *int64
    Email      string
    ImageUrl   string
}

type AppUser struct {
    AppUserID  int64
    FirstName  pgtype.Text
    MiddleName pgtype.Text
    LastName   pgtype.Text
    Birthday   pgtype.Timestamptz
    Email      string
    ImageUrl   string
}

func convUser(u AppUser) *User {
    return &User{
        UserId:     u.AppUserID,
        FirstName:  pgtyconv.ToStringPtr(u.FirstName),
        MiddleName: pgtyconv.ToStringPtr(u.MiddleName),
        LastName:   pgtyconv.ToStringPtr(u.LastName),
        Birthday:   pgtyconv.ToUnixTimePtr(u.Birthday, pgtyconv.TimeUnitSeconds),
        Email:      u.Email,
        ImageUrl:   u.ImageUrl,
    }
}

func main() {
    appUser := AppUser{
        AppUserID:  12345,
        FirstName:  pgtype.Text{String: "John", Valid: true},
        MiddleName: pgtype.Text{String: "D", Valid: true},
        LastName:   pgtype.Text{String: "Doe", Valid: true},
        Birthday:   pgtype.Timestamptz{Time: time.Now(), Valid: true},
        Email:      "john.doe@example.com",
        ImageUrl:   "http://example.com/image.jpg",
    }

    user := convUser(appUser)

    fmt.Printf("Converted User: %+v\n", user)
}
        </code>
      </pre>

      <h1 class="section-heading">Usage</h1>
      <h2 class="section-subheading">Installation & Setup</h2>
      <pre>
        <code class="language-shell">
mkdir my-go-project
cd my-go-project
go mod init my-go-project
go get github.com/papaya147/pgtyconv
        </code>
      </pre>

<!--      <h1 class="section-heading">Challenges & Learnings (TODO)</h1>-->
<!--      <h2 class="section-subheading">Challenges Faced</h2>-->
<!--      <p>-->
<!--        During the development of the parallelize package, one of the main challenges was achieving proper-->
<!--        generalization for methods and generics. Balancing flexibility with correctness required deep consideration of-->
<!--        Go's type system, particularly in designing abstractions that could effectively manage concurrency while-->
<!--        remaining easy to use and understand.-->
<!--      </p>-->

<!--      <h2 class="section-subheading">Lessons Learned</h2>-->
<!--      <ul>-->
<!--        <li>-->
<!--          <strong>Generalization with Generics</strong>: I learned the importance of properly designing and testing for-->
<!--          generalization in methods, ensuring the package could handle a wide range of use cases efficiently.-->
<!--        </li>-->
<!--        <li>-->
<!--          <strong>Concurrency Management</strong>: I gained a deeper understanding of Goâ€™s concurrency model, focusing-->
<!--          on creating abstractions that simplify parallel execution while maintaining performance and safety.-->
<!--        </li>-->
<!--        <li>-->
<!--          <strong>API Design</strong>: I discovered the value of creating a user-friendly API, balancing simplicity with-->
<!--          powerful functionality to make parallel execution accessible to users of all levels.-->
<!--        </li>-->
<!--        <li>-->
<!--          <strong>Robust Error Handling</strong>: I emphasized the need for strong error handling to manage edge cases-->
<!--          and ensure reliable outcomes across various parallel tasks.-->
<!--        </li>-->
<!--      </ul>-->

<!--      <h1 class="section-heading">Future Improvements</h1>-->
<!--      <h2 class="section-subheading">Planned Enhancements</h2>-->
<!--      <ul>-->
<!--        <li>-->
<!--          <strong>Generic Method Signatures</strong>: Simplify the usage by implementing a generic signature for all-->
<!--          types of methods, reducing confusion and streamlining the process.-->
<!--        </li>-->
<!--      </ul>-->
    </div>
  </div>
</div>
</body>
</html>